<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ°—æŒã¡ãƒ»ã‚„ã‚‹æ°—ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ã®ç§˜å¯†ã‚’çŸ¥ã‚‹è„³å†…è¨ºæ–­</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="manifest" href="manifest.json" />
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
    }
  </script>
  <style>
    body {
      background: linear-gradient(135deg, #e0f7e9 0%, #a8e6cf 100%);
      min-height: 100vh;
      font-size: 1rem;
    }
    .step-section, #resultSection { display: none; }
    .active, #resultSection.active { display: block; }
    h1 { font-size: 2rem; color: #004d40; }
    h2 { font-size: 1.5rem; color: #004d40; }
    p  { font-size: 1rem; color: #004d40; }
    .form-radio { height: 1.25rem; width: 1.25rem; }
  </style>
</head>
<body class="flex flex-col items-center py-6">

  <h1 class="text-4xl font-bold mb-6 text-center">æ°—æŒã¡ãƒ»ã‚„ã‚‹æ°—ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ã®ç§˜å¯†ã‚’çŸ¥ã‚‹è„³å†…è¨ºæ–­</h1>

  <!-- è³ªå•ãƒ•ã‚©ãƒ¼ãƒ  -->
  <div id="quizContainer" class="w-full max-w-3xl">
    <form id="quizForm" class="bg-white bg-opacity-90 p-6 rounded-lg shadow-lg space-y-8">

      <!-- ã‚¹ãƒ†ãƒƒãƒ—1 -->
      <section id="step1" class="step-section active">
        <h2 class="font-semibold mb-4">ã€ã‚»ãƒ­ãƒˆãƒ‹ãƒ³é–¢é€£ã€‘</h2>
        <div id="serotonin-questions"></div>
        <div class="flex justify-end">
          <button type="button" onclick="nextStep()" class="bg-blue-400 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg transition-transform transform hover:scale-105">æ¬¡ã¸</button>
        </div>
      </section>

      <!-- ã‚¹ãƒ†ãƒƒãƒ—2 -->
      <section id="step2" class="step-section">
        <h2 class="font-semibold mb-4">ã€ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³é–¢é€£ã€‘</h2>
        <div id="dopamine-questions"></div>
        <div class="flex justify-between">
          <button type="button" onclick="prevStep()" class="bg-gray-300 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-lg transition-transform transform hover:scale-105">æˆ»ã‚‹</button>
          <button type="button" onclick="nextStep()" class="bg-green-400 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg transition-transform transform hover:scale-105">æ¬¡ã¸</button>
        </div>
      </section>

      <!-- ã‚¹ãƒ†ãƒƒãƒ—3 -->
      <section id="step3" class="step-section">
        <h2 class="font-semibold mb-4">ã€ãƒãƒ«ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³é–¢é€£ã€‘</h2>
        <div id="norepinephrine-questions"></div>
        <div class="flex justify-between">
          <button type="button" onclick="prevStep()" class="bg-gray-300 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-lg transition-transform transform hover:scale-105">æˆ»ã‚‹</button>
          <button type="button" onclick="showResults()" class="bg-red-400 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-lg transition-transform transform hover:scale-105">è¨ºæ–­ã™ã‚‹</button>
        </div>
      </section>

    </form>
  </div>

  <!-- çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <div id="resultSection" class="bg-white bg-opacity-90 p-6 rounded-lg shadow-lg w-full max-w-3xl mt-6 text-gray-800">
    <h2 class="text-2xl font-bold mb-4 text-center">è¨ºæ–­çµæœ</h2>
    <div id="scoreDisplay" class="mb-4 text-lg text-center"></div>
    <div id="commentDisplay" class="mb-6 text-base text-gray-700 whitespace-pre-line"></div>
    <canvas id="radarChart" class="mb-6"></canvas>
    <div class="flex justify-center space-x-4">
      <a id="shareTwitter" target="_blank" class="bg-blue-400 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">Xã§ã‚·ã‚§ã‚¢</a>
      <a id="shareInstagram" target="_blank" class="bg-pink-400 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg transition-transform transform hover:scale-105">Instagramæ¡ˆå†…</a>
    </div>
  </div>
<script>
  let currentStep = 1;
  const totalSteps = 3;

  // è³ªå•å†…å®¹
  const serotoninQuestions = [
    "æœ€è¿‘ã€æ†‚ã†ã¤ãªæ°—åˆ†ãŒç¶šãã“ã¨ãŒå¤šã„ã§ã™ã‹ï¼Ÿ",
    "æ¼ ç„¶ã¨ã—ãŸä¸å®‰ã‚„å¿ƒé…ã‚’é »ç¹ã«æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
    "å¯ä»˜ããŒæ‚ªã‹ã£ãŸã‚Šã€é€”ä¸­ã§ç›®ãŒè¦šã‚ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã‹ï¼Ÿ",
    "å°ã•ãªã“ã¨ã§ã‚¤ãƒ©ã‚¤ãƒ©ã—ãŸã‚Šã€è¡å‹•çš„ã«æ€’ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
    "äººé–“é–¢ä¿‚ã«ã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã‹ï¼Ÿ",
    "ã•ã•ã„ãªã“ã¨ã§è½ã¡è¾¼ã‚€ã“ã¨ãŒå¢—ãˆã¾ã—ãŸã‹ï¼Ÿ",
    "æ—¥ä¸­ã«çœ æ°—ã‚„å€¦æ€ æ„Ÿã‚’æ„Ÿã˜ã‚„ã™ã„ã§ã™ã‹ï¼Ÿ",
    "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã‚‹æ™‚é–“ãŒå°‘ãªã„ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ"
  ];

  const dopamineQuestions = [
    "ä»¥å‰æ¥½ã—ã‹ã£ãŸã“ã¨ãŒã€æœ€è¿‘ã¯æ¥½ã—ã‚ãªããªã‚Šã¾ã—ãŸã‹ï¼Ÿ",
    "ä½•ã‹ã‚’å§‹ã‚ã‚‹æ„æ¬²ãŒæ¹§ã‹ãšã€ã‚„ã‚‹æ°—ãŒå‡ºãªã„ã“ã¨ãŒå¤šã„ã§ã™ã‹ï¼Ÿ",
    "é›†ä¸­ãŒç¶šã‹ãšã€ã™ãã«æ°—ãŒæ•£ã£ã¦ã—ã¾ã†ã“ã¨ãŒå¤šã„ã§ã™ã‹ï¼Ÿ",
    "ã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ„Ÿã˜ã‚‹ã¨è¡å‹•çš„ãªè²·ã„ç‰©ã‚„ã‚®ãƒ£ãƒ³ãƒ–ãƒ«ã‚’ã—ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
    "ç›®æ¨™ã‚’é”æˆã—ãŸã¨ãã«é”æˆæ„Ÿã‚’æ„Ÿã˜ã«ãããªã‚Šã¾ã—ãŸã‹ï¼Ÿ",
    "ä½•ã‚’ã—ã¦ã‚‚æº€è¶³æ„ŸãŒå¾—ã‚‰ã‚Œãªã„ã“ã¨ãŒå¤šã„ã§ã™ã‹ï¼Ÿ",
    "å¥½ããªã“ã¨ã¸ã®èˆˆå‘³ãŒè–„ã‚Œã¦ããŸã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ",
    "ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã®æ³¢ãŒæ¿€ã—ã„ã¨æ„Ÿã˜ã¾ã™ã‹ï¼Ÿ"
  ];

  const norepinephrineQuestions = [
    "æœ€è¿‘ã€ç–²ã‚Œã‚„ã™ãã€èº«ä½“ãŒã ã‚‹ã„ã¨æ„Ÿã˜ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã‹ï¼Ÿ",
    "çªç„¶ã®éŸ³ã‚„å‡ºæ¥äº‹ã«éå‰°ã«é©šã„ãŸã‚Šã€ä¸å®‰ã‚’æ„Ÿã˜ã‚„ã™ã„ã§ã™ã‹ï¼Ÿ",
    "å¤œã«ãªã‚‹ã¨é ­ãŒå†´ãˆã¦çœ ã‚Œãªã„ã“ã¨ãŒå¢—ãˆã¾ã—ãŸã‹ï¼Ÿ",
    "ã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ„Ÿã˜ã‚‹ã¨å¿ƒè‡“ãŒãƒ‰ã‚­ãƒ‰ã‚­ã—ãŸã‚Šã€å‹•æ‚¸ã‚’æ„Ÿã˜ã‚„ã™ã„ã§ã™ã‹ï¼Ÿ",
    "ä½•ã‹ã«å–ã‚Šçµ„ã‚€å‰ã«éå‰°ã«ç·Šå¼µã—ã¦ã—ã¾ã„ã¾ã™ã‹ï¼Ÿ",
    "å¿™ã—ã„ã¨ãã»ã©ç„¦ç‡¥æ„Ÿã‚’æ„Ÿã˜ã‚„ã™ã„ã§ã™ã‹ï¼Ÿ",
    "ã‚¤ãƒ©ã‚¤ãƒ©ã—ã‚„ã™ãæ€’ã‚Šã£ã½ããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
    "å¼·ã„ä¸å®‰ã§ä½“èª¿ã‚’å´©ã—ãŸçµŒé¨“ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ"
  ];

  function createQuestions(questions, containerId, category) {
    const container = document.getElementById(containerId);
    questions.forEach((q, idx) => {
      const div = document.createElement("div");
      div.className = "mb-4";
      div.innerHTML = `
        <p class="mb-2">${idx + 1}. ${q}</p>
        <div class="flex items-center space-x-2">
          ${[0,1,2,3,4,5].map(num => `
            <label class="inline-flex items-center space-x-1">
              <input type="radio" name="${category}_${idx+1}" value="${num}" class="form-radio">
              <span>${num}</span>
            </label>
          `).join('')}
        </div>
      `;
      container.appendChild(div);
    });
  }

  function showStep(n) {
    for (let i = 1; i <= totalSteps; i++) {
      document.getElementById(`step${i}`).classList.toggle('active', i === n);
    }
  }

  function nextStep() {
    if (currentStep < totalSteps) {
      currentStep++;
      showStep(currentStep);
    }
  }

  function prevStep() {
    if (currentStep > 1) {
      currentStep--;
      showStep(currentStep);
    }
  }

  function showResults() {
    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    for (let cat of ['serotonin', 'dopamine', 'norepinephrine']) {
      for (let i = 1; i <= 8; i++) {
        if (!document.querySelector(`input[name="${cat}_${i}"]:checked`)) {
          alert('æœªå›ç­”ã®è¨­å•ãŒã‚ã‚Šã¾ã™ã€‚ã™ã¹ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚');
          return;
        }
      }
    }

    let serotonin = 0, dopamine = 0, norepinephrine = 0;
    for (let i = 1; i <= 8; i++) {
      serotonin      += parseInt(document.querySelector(`input[name="serotonin_${i}"]:checked`).value);
      dopamine       += parseInt(document.querySelector(`input[name="dopamine_${i}"]:checked`).value);
      norepinephrine += parseInt(document.querySelector(`input[name="norepinephrine_${i}"]:checked`).value);
    }

    document.getElementById('quizContainer').style.display = 'none';
    const res = document.getElementById('resultSection');
    res.classList.add('active');

    document.getElementById('scoreDisplay').innerText =
      `ã‚»ãƒ­ãƒˆãƒ‹ãƒ³: ${serotonin}ã€€ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³: ${dopamine}ã€€ãƒãƒ«ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³: ${norepinephrine}`;

    const comments = [];

    if (serotonin < 16) {
      comments.push("â— ã‚»ãƒ­ãƒˆãƒ‹ãƒ³ãŒä½ã‚ã§ã™ï¼šæ°—åˆ†ã®å®‰å®šãŒä½ä¸‹å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚\nâ†’ã€æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‘æ·±å‘¼å¸ã‚„çŸ­ã„ç‘æƒ³ã‚’1æ—¥5åˆ†å–ã‚Šå…¥ã‚Œã¦ã¿ã¾ã—ã‚‡ã†ã€‚");
    } else if (serotonin > 24) {
      comments.push("â— ã‚»ãƒ­ãƒˆãƒ‹ãƒ³ã¯è‰¯å¥½ã§ã™ï¼šã‚¹ãƒˆãƒ¬ã‚¹è€æ€§ãŒã‚ã‚Šã¾ã™ã€‚\nâ†’ã€æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‘æ•£æ­©ãªã©è»½ã„é‹å‹•ã‚’ç¶™ç¶šã—ã¦ã€å¥½èª¿ã‚’ç¶­æŒã—ã¾ã—ã‚‡ã†ã€‚");
    } else {
      comments.push("â— ã‚»ãƒ­ãƒˆãƒ‹ãƒ³ã¯å¹³å‡çš„ã§ã™ï¼šãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ã„ã¾ã™ã€‚\nâ†’ã€æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‘å°±å¯å‰ã®ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ ã‚’ç¢ºä¿ã—ã¦ã€å®‰å®šæ„Ÿã‚’ç¶­æŒã—ã¾ã—ã‚‡ã†ã€‚");
    }

    if (dopamine < 16) {
      comments.push("â— ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ãŒä½ã‚ã§ã™ï¼šã‚„ã‚‹æ°—ã‚„å¿«æ¥½æ„ŸãŒä¸è¶³ã—ãŒã¡ã§ã™ã€‚\nâ†’ã€æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‘5åˆ†ã§çµ‚ã‚ã‚‹å°ã•ãªã‚¿ã‚¹ã‚¯ã‚’è¨­å®šã—ã¦ã€é”æˆæ„Ÿã‚’ç©ã¿é‡ã­ã¾ã—ã‚‡ã†ã€‚");
    } else if (dopamine > 24) {
      comments.push("â— ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ã¯è‰¯å¥½ã§ã™ï¼šãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒé«˜ã„çŠ¶æ…‹ã§ã™ã€‚\nâ†’ã€æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‘é•·ã‚ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ç€æ‰‹ã—ã¦ã€é›†ä¸­åŠ›ã‚’æ´»ã‹ã—ã¾ã—ã‚‡ã†ã€‚");
    } else {
      comments.push("â— ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³ã¯å¹³å‡çš„ã§ã™ï¼šã»ã©ã‚ˆã„æ„æ¬²ãŒã‚ã‚Šã¾ã™ã€‚\nâ†’ã€æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‘æ–°ã—ã„è¶£å‘³ã‚„å­¦ã³ã«å°‘ã—ãšã¤æŒ‘æˆ¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚");
    }

    if (norepinephrine < 16) {
      comments.push("â— ãƒãƒ«ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³ãŒä½ã‚ã§ã™ï¼šç–²ã‚Œã‚„ã™ã•ã‚’æ„Ÿã˜ã‚„ã™ã„ã§ã™ã€‚\nâ†’ã€æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‘æœæ—¥ã‚’æµ´ã³ãªãŒã‚‰ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚’ã—ã¦ã€è¦šé†’åº¦ã‚’ä¸Šã’ã¾ã—ã‚‡ã†ã€‚");
    } else if (norepinephrine > 24) {
      comments.push("â— ãƒãƒ«ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³ã¯é«˜ã‚ã§ã™ï¼šéç·Šå¼µã‚„ä¸å®‰æ„ŸãŒå¼·ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\nâ†’ã€æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‘1æ—¥ã«æ•°å›ã€è»½ã„æ·±å‘¼å¸ã‚„çŸ­ã„ä¼‘æ†©ã‚’æ„è­˜ã—ã¦å–ã‚Šå…¥ã‚Œã¾ã—ã‚‡ã†ã€‚");
    } else {
      comments.push("â— ãƒãƒ«ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³ã¯å¹³å‡çš„ã§ã™ï¼šé©åº¦ãªè¦šé†’ãŒã‚ã‚Šã¾ã™ã€‚\nâ†’ã€æ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€‘ã‚¿ã‚¤ãƒãƒ¼ã‚’ä½¿ã„ã€ãƒ¡ãƒªãƒãƒªã®ã‚ã‚‹ä½œæ¥­ã‚µã‚¤ã‚¯ãƒ«ã‚’ä¿ã¡ã¾ã—ã‚‡ã†ã€‚");
    }

    document.getElementById('commentDisplay').innerText = comments.join("\n\n");

    const ctx = document.getElementById('radarChart').getContext('2d');
    new Chart(ctx, {
      type: 'radar',
      data: {
        labels: ['ã‚»ãƒ­ãƒˆãƒ‹ãƒ³','ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³','ãƒãƒ«ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³'],
        datasets: [{
          label: 'è„³å†…ç‰©è³ªãƒãƒ©ãƒ³ã‚¹',
          data: [serotonin, dopamine, norepinephrine],
          fill: true,
          backgroundColor: 'rgba(34,197,94,0.2)',
          borderColor: 'rgba(34,197,94,1)',
          pointBackgroundColor: 'rgba(34,197,94,1)'
        }]
      },
      options: {
        scale: { ticks: { beginAtZero: true, max: 40 } }
      }
    });

    const shareText = encodeURIComponent(`ğŸ§ è„³å†…è¨ºæ–­ã—ã¾ã—ãŸï¼\nã‚»ãƒ­ãƒˆãƒ‹ãƒ³:${serotonin} ãƒ‰ãƒ¼ãƒ‘ãƒŸãƒ³:${dopamine} ãƒãƒ«ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³:${norepinephrine}\n#è„³å†…ãƒãƒ©ãƒ³ã‚¹è¨ºæ–­`);
    document.getElementById('shareTwitter').href = `https://twitter.com/intent/tweet?text=${shareText}`;
    document.getElementById('shareInstagram').href = `https://www.instagram.com/`;
  }

  // åˆæœŸåŒ–
  createQuestions(serotoninQuestions, 'serotonin-questions', 'serotonin');
  createQuestions(dopamineQuestions, 'dopamine-questions', 'dopamine');
  createQuestions(norepinephrineQuestions, 'norepinephrine-questions', 'norepinephrine');
  showStep(currentStep);
</script>

</body>
</html>
